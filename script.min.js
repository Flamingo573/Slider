"use strict";function _defineProperty(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),Slider=function(){function a(b){_classCallCheck(this,a),this.wrapper=b.wrapper,this.limiter=b.limiter,this.margin=b.margin,this.amountImg=b.amountImage,this.carousel=b.carousel,this.activeDot=0,this.autoPlayTime=b.autoPlayTime,this.bindMove=bind(this.eventMove,this),this.bindUp=bind(this.eventUp,this),this.carousel.ondragstart=function(){return!1},this.limiter.addEventListener("mousedown",bind(this.eventDown,this)),this.limiter.addEventListener("touchstart",bind(this.eventDown,this)),this.wrapper.addEventListener("click",bind(this.listenerEvent,this)),window.addEventListener("resize",bind(this.listenerEvent,this))}return _createClass(a,[{key:"listenerEvent",value:function(b){return"resize"==b.type?void this.start():void(this.wrapper.contains(b.target)&&("button-1"==b.target.className&&this.left(),"button-2"==b.target.className&&this.right(),this.boxDots.contains(b.target)&&b.target.hasAttribute("data-index")&&this.selectedDot(b.target)))}},{key:"left",value:function(){this.autoPlay("reset"),this.carousel.style.transition="transform 500ms",this.count+=this.widthImg+this.margin,Math.round(this.count)>-this.getWidthWrapper()&&this.endCarousel("left"),this.setPositionCarousel(),this.getActiveDots()}},{key:"right",value:function(){this.autoPlay("reset"),this.carousel.style.transition="transform 500ms",this.count-=this.widthImg+this.margin,Math.round(this.count)<this.getLastPositionCarousel()&&this.endCarousel("right"),this.setPositionCarousel(),this.getActiveDots()}},{key:"selectedDot",value:function(b){this.carousel.style.transition="transform 250ms",this.autoPlay("reset");var c=b.getAttribute("data-index");this.count=-c*(this.getWidthWrapper()+this.margin),this.setPositionCarousel(),this.activeDot=c-1,this.setActiveDot()}},{key:"eventDown",value:function(b){var c;this.autoPlay("stop"),this.carousel.style.transition="",this.wrapper.classList.add("grab");this.count,this.getCoordX(b);this.dragObj=(c={startCoord:this.getCoordX(b),count:this.count,coordMove:0},_defineProperty(c,"coordMove",0),_defineProperty(c,"swipePlay",!1),c),this.controlEventListener(b)}},{key:"eventMove",value:function(b){this.dragObj.swipePlay=!0,this.dragObj.coordMove=this.getCoordX(b)||1,this.count=this.dragObj.count-(this.dragObj.startCoord-this.dragObj.coordMove);var c=Math.round(-this.getWidthWrapper()-this.margin),d=Math.round(this.getLastPositionCarousel());Math.round(this.count)>c&&Math.round(this.count)>d&&(this.count=this.getLastPositionCarousel(),this.dragObj.count=this.count,this.dragObj.startCoord=this.dragObj.coordMove),Math.round(this.count)<d&&Math.round(this.count)<c&&(this.count=-this.getWidthWrapper()-this.margin,this.dragObj.count=this.count,this.dragObj.startCoord=this.dragObj.coordMove),this.setPositionCarousel(),this.getActiveDots()}},{key:"eventUp",value:function(b){if(this.controlEventListener(b),this.wrapper.classList.remove("grab"),this.dragObj.swipePlay){this.carousel.style.transition="transform 250ms";var c=void 0,d=void 0,e=void 0;for(d=0;d<this.arraytForNav.length;d++)if(this.count<=this.arraytForNav[d]){c=this.arraytForNav[d];break}this.dragObj.startCoord-this.dragObj.coordMove>0&&(e=Math.abs(this.count-c),e>70?this.count=this.arraytForNav[d-1]:this.count=this.arraytForNav[d]),this.dragObj.startCoord-this.dragObj.coordMove<0&&(e=Math.abs(this.count-this.arraytForNav[d-1]),e>70?this.count=this.arraytForNav[d]:this.count=this.arraytForNav[d-1]),this.autoPlay("play"),this.setPositionCarousel(),this.getActiveDots()}}},{key:"endCarousel",value:function(b){this.carousel.style.transition="",this.count="left"==b?this.getLastPositionCarousel():this.getStartPositionCaroisel(),this.setPositionCarousel(),"left"==b?setTimeout(bind(this.left,this),10):setTimeout(bind(this.right,this),10)}},{key:"getLastPositionCarousel",value:function(){return-this.widthCarousel+this.getWidthWrapper()+this.margin}},{key:"getStartPositionCaroisel",value:function(){return this.count=-this.getWidthWrapper()-this.margin,this.count}},{key:"setPositionCarousel",value:function(){this.carousel.style.transform="translateX("+this.count+"px)"}},{key:"getActiveDots",value:function(){var b=Math.abs(Math.round(this.count));if(Math.round(this.count)<=this.getLastPositionCarousel())return this.activeDot=0,void this.setActiveDot();for(var c=this.amountDots+1;0!=c;c--){var d=b>=this.objectForShiftDots[c]&&b<=this.objectForShiftDots[c+1];if(d){this.activeDot=c-1,this.setActiveDot();break}}}},{key:"setActiveDot",value:function(){for(var b=0;b<this.amountDots;b++)this.boxDots.children[b].classList.remove("active");this.boxDots.children[this.activeDot].classList.add("active")}},{key:"getCoordX",value:function(b){return"mousedown"==b.type||"mousemove"==b.type?b.pageX:"touchstart"==b.type||"touchmove"==b.type?b.touches[0].pageX:void 0}},{key:"controlEventListener",value:function(b){"mousedown"==b.type&&(window.addEventListener("mousemove",this.bindMove),window.addEventListener("mouseup",this.bindUp)),"mouseup"==b.type&&(window.removeEventListener("mousemove",this.bindMove),window.removeEventListener("mouseup",this.bindUp)),"touchstart"==b.type&&(window.addEventListener("touchmove",this.bindMove),window.addEventListener("touchend",this.bindUp)),"touchend"==b.type&&(window.removeEventListener("touchmove",this.bindMove),window.removeEventListener("touchend",this.bindUp))}},{key:"getWidthImg",value:function(b){this.widthImg=(this.getWidthWrapper()-this.margin*(b-1))/b}},{key:"setWidthImg",value:function(){for(var b=0;b<this.carousel.children.length;b++){var c=this.carousel.children[b];c.style.width=this.widthImg+"px",c.style.marginRight=this.margin+"px"}}},{key:"setWidthCarousel",value:function(){this.widthCarousel=this.carousel.children.length*(this.widthImg+this.margin),this.carousel.style.width=this.widthCarousel+"px"}},{key:"fitWidth",value:function(){var b=[0,0];for(var c in this.amountImg){var d=this.amountImg[c];d>=b[0]&&(b[0]=d,b[1]=c)}if(this.getWidthWrapper()>b[0])return this.getWidthImg(b[1]),void(this.currentAmountImg=b[1]);for(var e in this.amountImg)if(this.getWidthWrapper()<=this.amountImg[e]){this.getWidthImg(e),this.currentAmountImg=e;break}}},{key:"getWidthWrapper",value:function(){return this.wrapper.offsetWidth}},{key:"setObjectForShiftDots",value:function(){for(var b={},c=1;c<this.amountDots+1;c++)b[c]=c*(this.getWidthWrapper()+this.margin);b[this.amountDots+1]=Math.abs(this.getLastPositionCarousel()),this.objectForShiftDots=b}},{key:"setArrayForNav",value:function(){this.arraytForNav=[];for(var c=(this.getStartPositionCaroisel(),0);c<this.carousel.children.length;c++){var d=c*(this.widthImg+this.margin)*-1;this.arraytForNav.push(Math.round(d))}this.arraytForNav.reverse()}},{key:"renderButtonSlider",value:function(){if(!this.wrapper.querySelector('div[class^="button"]'))for(var b=1;b<3;b++){var c=document.createElement("div");c.classList.add("button-"+b),this.wrapper.appendChild(c)}}},{key:"renderDots",value:function(){var b=this.wrapper.querySelector(".boxDots");b&&this.wrapper.removeChild(b);var c=document.createElement("div");c.classList.add("boxDots");for(var d=Math.ceil((this.carousel.children.length-this.carousel.querySelectorAll(".clone").length)/this.currentAmountImg),e=0;e<d;e++){var f=document.createElement("div");f.setAttribute("data-index",e+1),c.appendChild(f)}this.amountDots=d,this.wrapper.appendChild(c),this.boxDots=c}},{key:"addClone",value:function(){var b=this,c=this.carousel.getElementsByClassName("clone");if(c.length)for(var d=0;d<c.length;d++)this.carousel.removeChild(c[d]),d--;for(var e=[],f=[],g=this.carousel.children.length-1;g>this.carousel.children.length-1-this.currentAmountImg;g--){var h=this.carousel.children[g].cloneNode(!0);h.classList.add("clone"),e.push(h)}for(var i=0;i<this.currentAmountImg;i++){var j=this.carousel.children[i].cloneNode(!0);j.classList.add("clone"),f.push(j)}e.forEach(function(a){return b.carousel.insertBefore(a,b.carousel.firstChild)}),f.forEach(function(a){return b.carousel.appendChild(a)}),this.setWidthCarousel()}},{key:"autoPlay",value:function(b){var c=this.autoPlayTime;c&&("play"==b&&(clearInterval(this.timeId),this.timeId=setInterval(bind(function(){this.right()},this),c)),"stop"==b&&clearInterval(this.timeId),"reset"==b&&(clearInterval(this.timeId),this.autoPlay("play")))}},{key:"start",value:function(){this.fitWidth(),this.setWidthImg(),this.setWidthCarousel(),this.renderButtonSlider(),this.renderDots(),this.addClone(),this.getStartPositionCaroisel(),this.setPositionCarousel(),this.setObjectForShiftDots(),this.getActiveDots(),this.autoPlay("play"),this.setArrayForNav()}}]),a}();
